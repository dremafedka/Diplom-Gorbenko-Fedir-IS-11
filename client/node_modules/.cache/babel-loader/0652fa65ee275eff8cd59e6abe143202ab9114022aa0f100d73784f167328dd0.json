{"ast":null,"code":"var _jsxFileName = \"D:\\\\ProjectD\\\\client\\\\src\\\\components\\\\Dashboards\\\\CoachDashboards\\\\CoachDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport NavigationPanel from './NavigationPanel';\nimport MyTrainingSection from './MyTrainingSection';\nimport HistorySection from './HistorySection';\nimport CreateTrainingSection from './CreateTrainingSection';\nimport ProfileSection from './ProfileSection';\nimport ReviewsSection from './ReviewsSection';\nimport Modal from '../../Common/Modal';\nimport { createTraining, getCoachTrainings, getTrainingParticipants, updateTraining, deleteTraining, getCoachProfile, getAthleteProfile, updateCoachProfile, changeCoachPassword, uploadCoachAvatar, getCoachReviews, API_BASE_URL } from '../../../services/api';\nimport './CoachDashboards.css';\n\n// Мапа секція → логотип\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst sportLogos = {\n  \"Футбол\": require('../../../assets/logos/football.jpg'),\n  \"Баскетбол\": require('../../../assets/logos/basketball.jpg'),\n  \"Бадмінтон\": require('../../../assets/logos/badminton.jpg'),\n  \"Волейбол\": require('../../../assets/logos/volleyball.jpg'),\n  \"Бейсбол\": require('../../../assets/logos/baseball.jpg'),\n  \"Регбі\": require('../../../assets/logos/rugby.jpg'),\n  \"Хокей\": require('../../../assets/logos/hockey.jpg'),\n  \"Карате\": require('../../../assets/logos/karate.jpg'),\n  \"Бокс\": require('../../../assets/logos/boxing.jpg'),\n  \"Ушу\": require('../../../assets/logos/wushu.jpg'),\n  \"Джиу-джитсу\": require('../../../assets/logos/jiu_jitsu.jpg'),\n  \"ММА\": require('../../../assets/logos/mma.jpg'),\n  \"Біг\": require('../../../assets/logos/running.jpg'),\n  \"Стрибки\": require('../../../assets/logos/jumping.jpg'),\n  \"Метання\": require('../../../assets/logos/throwing.jpg'),\n  \"Плавання\": require('../../../assets/logos/swimming.jpg'),\n  \"Вітрильний спорт\": require('../../../assets/logos/sailing.jpg'),\n  \"Каноїзм\": require('../../../assets/logos/canoeing.jpg'),\n  \"Скейбординг\": require('../../../assets/logos/skateboarding.jpg'),\n  \"Сноубординг\": require('../../../assets/logos/snowboarding.jpg'),\n  \"Альпінізм\": require('../../../assets/logos/climbing.jpg'),\n  \"Фітнес\": require('../../../assets/logos/fitness.jpg'),\n  \"Силові тренування\": require('../../../assets/logos/strength_training.jpg'),\n  \"Йога\": require('../../../assets/logos/yoga.jpg')\n};\n\n// Категорії та секції\nconst sportCategories = {\n  \"Ігри з м'ячем\": [\"Футбол\", \"Баскетбол\", \"Бадмінтон\", \"Волейбол\", \"Бейсбол\", \"Регбі\", \"Хокей\"],\n  \"Бойові мистецтва\": [\"Карате\", \"Бокс\", \"Ушу\", \"Джиу-джитсу\", \"ММА\"],\n  \"Легка атлетика\": [\"Біг\", \"Стрибки\", \"Метання\"],\n  \"Водні види спорту\": [\"Плавання\", \"Вітрильний спорт\", \"Каноїзм\"],\n  \"Екстремальні види спорту\": [\"Скейбординг\", \"Сноубординг\", \"Альпінізм\"],\n  \"Фітнес та тренажерний зал\": [\"Фітнес\", \"Силові тренування\", \"Йога\"]\n};\nconst defaultAvatar = `${API_BASE_URL}/avatars/default.png`;\nexport default function CoachDashboard() {\n  _s();\n  // Навігація\n  const history = useHistory();\n  const handleLogout = () => {\n    localStorage.removeItem('userId');\n    history.push('/');\n  };\n\n  // Вкладки\n  const [activeTab, setActiveTab] = useState('my-trainings');\n\n  // Сайдбар: створення тренувань\n  const [showCreateForm, setShowCreateForm] = useState(false);\n\n  // Закриваємо сайдбар при зміні вкладки\n  useEffect(() => {\n    setShowCreateForm(false);\n  }, [activeTab]);\n\n  // Дані форми створення\n  const [trainingData, setTrainingData] = useState({\n    date: '',\n    start_time: '',\n    end_time: '',\n    price: '',\n    spots: '',\n    currency: 'UAH',\n    category: '',\n    section: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [modalMessage, setModalMessage] = useState('');\n  const [showModal, setShowModal] = useState(false);\n\n  // Тренування\n  const [trainings, setTrainings] = useState([]);\n  const [selectedTraining, setSelectedTraining] = useState(null);\n  const [participants, setParticipants] = useState([]);\n  const [showParticipantsModal, setShowParticipantsModal] = useState(false);\n  const [athleteProfile, setAthleteProfile] = useState(null);\n  const [showAthleteModal, setShowAthleteModal] = useState(false);\n\n  // Редагування\n  const [editMode, setEditMode] = useState(false);\n  const [editData, setEditData] = useState({\n    date: '',\n    start_time: '',\n    end_time: '',\n    price: '',\n    spots: '',\n    currency: '',\n    category: '',\n    section: ''\n  });\n\n  //Минулі тренування\n  const now = new Date();\n  const pastTrainings = React.useMemo(() => trainings.filter(t => new Date(t.end_time) < now).sort((a, b) => new Date(b.start_time) - new Date(a.start_time)), [trainings]);\n\n  // Профіль\n  const [profile, setProfile] = useState(null);\n  const [editProfileMode, setEditProfileMode] = useState(false);\n  const [nameInput, setNameInput] = useState('');\n  const [ageInput, setAgeInput] = useState('');\n  const [phoneInput, setPhoneInput] = useState('');\n  const [description, setDescription] = useState('');\n  const [favoriteSports, setFavoriteSports] = useState([]);\n  const [profileError, setProfileError] = useState('');\n  const [showProfileSuccess, setShowProfileSuccess] = useState(false);\n\n  // Аватар\n  const [avatarFile, setAvatarFile] = useState(null);\n  const [avatarPreview, setAvatarPreview] = useState('');\n  const [showAvatarSuccess, setShowAvatarSuccess] = useState(false);\n\n  // Зміна пароля\n  const [showPassMode, setShowPassMode] = useState(false);\n  const [oldPass, setOldPass] = useState('');\n  const [newPass, setNewPass] = useState('');\n  const [confirmPass, setConfirmPass] = useState('');\n  const [passError, setPassError] = useState('');\n  const [passSuccess, setPassSuccess] = useState(false);\n\n  // Видалення\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [trainingToDelete, setTrainingToDelete] = useState(null);\n\n  // Відгуки\n  const [reviews, setReviews] = useState([]);\n  const [avgRating, setAvgRating] = useState(null);\n  const [reviewCount, setReviewCount] = useState(0);\n  const reviewSectionRef = useRef(null);\n\n  // повідомлення для помилки форми створення\n  const [errorModalMessage, setErrorModalMessage] = useState('');\n  const [showErrorModal, setShowErrorModal] = useState(false);\n\n  // Інші константи\n  const today = new Date().toISOString().split('T')[0];\n  const allSections = Object.values(sportCategories).flat();\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Завантаження даних\n  useEffect(() => {\n    fetchTrainings();\n    fetchProfileAndReviews();\n  }, []);\n  async function fetchTrainings() {\n    setIsLoading(true); // ← перед стартом завантаження\n    const coachId = localStorage.getItem('userId');\n    if (!coachId) {\n      setIsLoading(false);\n      return;\n    }\n    try {\n      const {\n        trainings\n      } = await getCoachTrainings(coachId);\n      setTrainings(trainings.map(t => ({\n        ...t,\n        spots: typeof t.spots === 'string' ? parseInt(t.spots, 10) : t.spots\n      })));\n    } catch (err) {\n      console.error('Помилка завантаження тренувань:', err);\n    } finally {\n      setIsLoading(false); // ← після завершення (успіх чи помилка)\n    }\n  }\n  async function fetchProfileAndReviews() {\n    const coachId = localStorage.getItem('userId');\n    if (!coachId) return;\n    try {\n      // Профіль\n      const {\n        profile\n      } = await getCoachProfile(coachId);\n      setProfile(profile);\n      setNameInput(profile.name);\n      setAgeInput(profile.age);\n      setPhoneInput(profile.phone || '');\n      setDescription(profile.description || '');\n      setFavoriteSports(profile.favorite_sports || []);\n      setAvatarPreview(profile.avatar_url ? `${profile.avatar_url}?t=${Date.now()}` : defaultAvatar);\n      // Відгуки\n      const {\n        reviews,\n        average_rating,\n        count\n      } = await getCoachReviews(coachId);\n      const withAvatars = await Promise.all(reviews.map(async r => {\n        if (!r.athlete_id) return {\n          ...r,\n          athlete_avatar_url: null\n        };\n        try {\n          const {\n            profile: athlete\n          } = await getAthleteProfile(r.athlete_id);\n          return {\n            ...r,\n            athlete_avatar_url: athlete.avatar_url || null\n          };\n        } catch {\n          return {\n            ...r,\n            athlete_avatar_url: null\n          };\n        }\n      }));\n      setReviews(withAvatars);\n      setAvgRating(average_rating);\n      setReviewCount(count);\n    } catch (err) {\n      console.error('Помилка завантаження профілю/відгуків:', err);\n    }\n  }\n\n  // Мінімальний час для сьогодні\n  function getMinTime() {\n    return trainingData.date === today ? new Date().toTimeString().slice(0, 5) : '00:00';\n  }\n\n  // Мінімальний час для поля “Початок” в режимі редагування\n  function getEditMinTime() {\n    const todayStr = new Date().toISOString().split('T')[0];\n    // якщо обрана дата редагування — сьогодні, мінімум = зараз\n    return editData.date === todayStr ? new Date().toTimeString().slice(0, 5) : '00:00';\n  }\n\n  // Обробники форми створення\n  function handleChange(e) {\n    setTrainingData({\n      ...trainingData,\n      [e.target.name]: e.target.value\n    });\n  }\n  function handleCategoryChange(e) {\n    setTrainingData({\n      ...trainingData,\n      category: e.target.value,\n      section: ''\n    });\n  }\n  async function handleSubmit(e) {\n    e.preventDefault();\n    // Приховуємо старі помилки\n    setShowErrorModal(false);\n    setErrors({});\n    const coachId = localStorage.getItem('userId');\n    if (!coachId) {\n      setErrorModalMessage('Будь ласка, увійдіть повторно.');\n      setShowErrorModal(true);\n      return;\n    }\n\n    // Базова валідація\n    if (!trainingData.date || !trainingData.start_time || !trainingData.end_time) {\n      setErrorModalMessage('Оберіть дату та час.');\n      setShowErrorModal(true);\n      return;\n    }\n    if (!trainingData.category || !trainingData.section) {\n      setErrorModalMessage('Оберіть категорію та секцію.');\n      setShowErrorModal(true);\n      return;\n    }\n    if (trainingData.start_time >= trainingData.end_time) {\n      setErrorModalMessage('Час завершення має бути пізніше початку.');\n      setShowErrorModal(true);\n      return;\n    }\n    if (parseFloat(trainingData.price) < 0) {\n      setErrorModalMessage('Ціна не може бути від’ємною.');\n      setShowErrorModal(true);\n      return;\n    }\n    const startDT = new Date(`${trainingData.date}T${trainingData.start_time}`);\n    if (startDT < new Date()) {\n      setErrorModalMessage('Не можна створювати тренування у минулому.');\n      setShowErrorModal(true);\n      return;\n    }\n\n    // Підготовка даних\n    const payload = {\n      coach_id: coachId,\n      coach_name: profile.name,\n      start_time: `${trainingData.date}T${trainingData.start_time}`,\n      end_time: `${trainingData.date}T${trainingData.end_time}`,\n      price: parseFloat(trainingData.price),\n      spots: parseInt(trainingData.spots, 10),\n      currency: trainingData.currency,\n      category: trainingData.category,\n      section: trainingData.section\n    };\n    try {\n      await createTraining(payload);\n\n      // Успіх\n      setModalMessage('Тренування успішно створено!');\n      setShowModal(true);\n\n      // Скидаємо форму\n      setTrainingData({\n        date: '',\n        start_time: '',\n        end_time: '',\n        price: '',\n        spots: '',\n        currency: 'UAH',\n        category: '',\n        section: ''\n      });\n      fetchTrainings();\n      setShowCreateForm(false);\n    } catch (err) {\n      // ловимо бекенд-помилки та показуємо у модалці\n      let msg = err.message || 'Невідома помилка при створенні тренування.';\n      if (msg.toLowerCase().includes('conflict')) {\n        msg = 'Дане тренування накладається за часом на вже існуюче – оберіть інший проміжок.';\n      }\n      setErrorModalMessage(msg);\n      setShowErrorModal(true);\n    }\n  }\n\n  // Перегляд / редагування учасників\n  async function handleViewParticipants(training) {\n    const freeSeats = typeof training.spots === 'string' ? parseInt(training.spots, 10) : training.spots;\n    setSelectedTraining({\n      ...training,\n      spots: freeSeats\n    });\n    try {\n      const {\n        participants: fromServer\n      } = await getTrainingParticipants(training._id);\n      setParticipants(fromServer);\n      setShowParticipantsModal(true);\n      setEditMode(false);\n    } catch (err) {\n      console.error('Помилка завантаження учасників:', err);\n    }\n  }\n  async function handleViewAthlete(athleteId) {\n    try {\n      const {\n        profile\n      } = await getAthleteProfile(athleteId);\n      setAthleteProfile(profile);\n      setShowAthleteModal(true);\n    } catch (err) {\n      console.error('Не вдалося завантажити дані спортсмена:', err);\n    }\n  }\n  function handleDeleteClick(training) {\n    setTrainingToDelete(training);\n    setShowDeleteConfirm(true);\n  }\n  async function confirmDelete() {\n    try {\n      await deleteTraining(trainingToDelete._id);\n      setModalMessage('Тренування успішно видалено.');\n      setShowModal(true);\n      fetchTrainings();\n    } catch (err) {\n      setModalMessage(`Помилка: ${err.message}`);\n      setShowModal(true);\n    } finally {\n      setShowDeleteConfirm(false);\n      setTrainingToDelete(null);\n    }\n  }\n  function cancelDelete() {\n    setShowDeleteConfirm(false);\n    setTrainingToDelete(null);\n  }\n  function handleEdit() {\n    var _t$participants;\n    const t = selectedTraining;\n    const signed = ((_t$participants = t.participants) === null || _t$participants === void 0 ? void 0 : _t$participants.length) || 0;\n    const freeSeats = parseInt(t.spots, 10);\n    const totalCapacity = signed + freeSeats;\n    setEditData({\n      date: new Date(t.start_time).toISOString().split('T')[0],\n      start_time: new Date(t.start_time).toTimeString().slice(0, 5),\n      end_time: new Date(t.end_time).toTimeString().slice(0, 5),\n      price: t.price,\n      currency: t.currency,\n      category: t.category,\n      section: t.section,\n      spots: totalCapacity.toString()\n    });\n    setEditMode(true);\n  }\n  function handleEditChange(e) {\n    setEditData({\n      ...editData,\n      [e.target.name]: e.target.value\n    });\n  }\n  async function handleEditSubmit(e) {\n    var _selectedTraining$par;\n    e.preventDefault();\n    setErrors({});\n\n    // 1. Обчислимо кількість вже підписаних і загальну місткість\n    const signed = ((_selectedTraining$par = selectedTraining.participants) === null || _selectedTraining$par === void 0 ? void 0 : _selectedTraining$par.length) || 0;\n    const totalCapacity = parseInt(editData.spots, 10);\n\n    // 2. Локальна валідація\n    if (!editData.date || !editData.start_time || !editData.end_time) {\n      setErrors({\n        edit: 'Оберіть дату та час.'\n      });\n      return;\n    }\n    if (editData.start_time >= editData.end_time) {\n      setErrors({\n        edit: 'Час завершення має бути пізніше часу початку.'\n      });\n      return;\n    }\n    const newStart = new Date(`${editData.date}T${editData.start_time}`);\n    if (newStart < new Date()) {\n      setErrors({\n        edit: 'Не можна створювати тренування у минулому часі.'\n      });\n      return;\n    }\n    if (isNaN(totalCapacity)) {\n      setErrors({\n        edit: 'Кількість місць має бути числом.'\n      });\n      return;\n    }\n    if (totalCapacity < signed) {\n      setErrors({\n        edit: `Загальна кількість (${totalCapacity}) менша за вже записані (${signed}).`\n      });\n      return;\n    }\n\n    // 3. Підготуємо payload\n    const payload = {\n      start_time: `${editData.date}T${editData.start_time}`,\n      end_time: `${editData.date}T${editData.end_time}`,\n      price: parseFloat(editData.price),\n      currency: editData.currency,\n      category: editData.category,\n      section: editData.section,\n      spots: totalCapacity\n    };\n\n    // 4. Відправка на сервер та обробка помилок\n    try {\n      await updateTraining(selectedTraining._id, payload);\n      setModalMessage('Тренування успішно оновлено!');\n      setShowModal(true);\n      setEditMode(false);\n      fetchTrainings();\n      setShowParticipantsModal(false);\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data, _err$response2$data$d, _err$response3, _err$response3$data;\n      console.error('handleEditSubmit error →', err);\n      const status = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status;\n      const detail = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : (_err$response2$data$d = _err$response2$data.detail) === null || _err$response2$data$d === void 0 ? void 0 : _err$response2$data$d.toLowerCase()) || '';\n\n      // Якщо бекенд повернув 400 із текстом про накладення — покажемо свою фразу\n      if (status === 400 && detail.includes('накладається за часом')) {\n        setErrors({\n          edit: 'Дане тренування накладається за часом на вже існуюче – оберіть інший проміжок.'\n        });\n        return;\n      }\n\n      // В інших випадках — просто виведемо detail або повідомлення помилки\n      const fallback = ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.detail) || err.message || 'Невідома помилка при оновленні';\n      setErrors({\n        edit: fallback\n      });\n    }\n  }\n  function cancelEdit() {\n    setEditMode(false);\n  }\n  function closeParticipantsModal() {\n    setShowParticipantsModal(false);\n    setSelectedTraining(null);\n    setEditMode(false);\n  }\n  function closeAthleteModal() {\n    setShowAthleteModal(false);\n    setAthleteProfile(null);\n  }\n\n  // Профіль: редагування\n  function handleProfileFieldChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    if (name === 'nameInput') setNameInput(value);\n    if (name === 'ageInput') setAgeInput(value);\n    if (name === 'phoneInput') setPhoneInput(value);\n    if (name === 'description') setDescription(value);\n    if (name === 'oldPass') setOldPass(value);\n    if (name === 'newPass') setNewPass(value);\n    if (name === 'confirmPass') setConfirmPass(value);\n  }\n  function toggleSport(sport) {\n    setFavoriteSports(prev => prev.includes(sport) ? prev.filter(s => s !== sport) : [...prev, sport]);\n  }\n  async function handleSaveProfile() {\n    setProfileError('');\n    if (!nameInput.trim()) {\n      setProfileError('Поле \"Ім\\'я\" обов\\'язкове');\n      return;\n    }\n    const ageNum = parseInt(ageInput, 10);\n    if (isNaN(ageNum)) {\n      setProfileError('Поле \"Вік\" обов\\'язкове');\n      return;\n    }\n    if (ageNum < 18) {\n      setProfileError('Вік не може бути менше 18 років');\n      return;\n    }\n    try {\n      await updateCoachProfile({\n        user_id: profile.user_id,\n        name: nameInput.trim(),\n        age: ageNum,\n        phone: phoneInput,\n        description,\n        favorite_sports: favoriteSports\n      });\n      setShowProfileSuccess(true);\n      setEditProfileMode(false);\n      fetchProfileAndReviews();\n    } catch (err) {\n      setProfileError(err.message);\n    }\n  }\n  function handleAvatarChange(e) {\n    const file = e.target.files[0];\n    if (!file) return;\n    setAvatarFile(file);\n    setAvatarPreview(URL.createObjectURL(file));\n  }\n  async function handleUploadAvatar() {\n    if (!avatarFile) return;\n    try {\n      const {\n        avatar_url\n      } = await uploadCoachAvatar(profile.user_id, avatarFile);\n      setAvatarPreview(avatar_url);\n      fetchProfileAndReviews();\n      setAvatarFile(null);\n      setShowAvatarSuccess(true);\n    } catch (err) {\n      console.error('Помилка завантаження аватара:', err);\n    }\n  }\n  async function handleChangePassword() {\n    setPassError('');\n    try {\n      await changeCoachPassword({\n        user_id: profile.user_id,\n        old_password: oldPass,\n        new_password: newPass,\n        confirm_password: confirmPass\n      });\n      setPassSuccess(true);\n      setShowPassMode(false);\n      setOldPass('');\n      setNewPass('');\n      setConfirmPass('');\n    } catch (err) {\n      setPassError(err.message);\n    }\n  }\n\n  // Форматування\n  function formatDate(dateString) {\n    return new Date(dateString).toLocaleDateString('uk-UA', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    });\n  }\n  function formatTime(dateString) {\n    return new Date(dateString).toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  }\n\n  // JSX\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `dashboard-container${showCreateForm ? ' shifted' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(NavigationPanel, {\n      activeTab: activeTab,\n      onTabChange: setActiveTab,\n      onLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 7\n    }, this), activeTab === 'my-trainings' && /*#__PURE__*/_jsxDEV(MyTrainingSection, {\n      trainings: trainings.filter(t => new Date(t.end_time) > now),\n      isLoading: isLoading,\n      showCreateForm: showCreateForm,\n      toggleCreateForm: () => setShowCreateForm(v => !v),\n      trainingData: trainingData,\n      errors: errors,\n      onChangeField: handleChange,\n      onChangeCategory: handleCategoryChange,\n      onSubmit: handleSubmit,\n      sportCategories: sportCategories,\n      today: today,\n      getMinTime: getMinTime,\n      getEditMinTime: getEditMinTime,\n      errorsEdit: errors.edit,\n      onView: handleViewParticipants,\n      onDelete: handleDeleteClick,\n      sportLogos: sportLogos,\n      selectedTraining: selectedTraining,\n      participants: participants,\n      showParticipantsModal: showParticipantsModal,\n      editMode: editMode,\n      editData: editData,\n      handleEdit: handleEdit,\n      handleEditChange: handleEditChange,\n      handleEditSubmit: handleEditSubmit,\n      cancelEdit: cancelEdit,\n      closeParticipantsModal: closeParticipantsModal,\n      onViewAthlete: handleViewAthlete,\n      showAthleteModal: showAthleteModal,\n      athleteProfile: athleteProfile,\n      closeAthleteModal: closeAthleteModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 9\n    }, this), activeTab === 'history' && /*#__PURE__*/_jsxDEV(HistorySection, {\n      trainings: pastTrainings,\n      sportLogos: sportLogos\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 8\n    }, this), activeTab === 'profile' && profile && /*#__PURE__*/_jsxDEV(ProfileSection, {\n      profile: profile,\n      editMode: editProfileMode,\n      nameInput: nameInput,\n      ageInput: ageInput,\n      phoneInput: phoneInput,\n      description: description,\n      favoriteSports: favoriteSports,\n      allSections: allSections,\n      profileError: profileError,\n      showPassMode: showPassMode,\n      oldPass: oldPass,\n      newPass: newPass,\n      confirmPass: confirmPass,\n      passError: passError,\n      onToggleEditMode: () => setEditProfileMode(true),\n      onChangeField: handleProfileFieldChange,\n      onToggleSport: toggleSport,\n      onSaveProfile: handleSaveProfile,\n      onCancelEdit: () => setEditProfileMode(false),\n      onUploadAvatar: handleUploadAvatar,\n      onTogglePasswordMode: () => setShowPassMode(true),\n      onChangePassword: handleChangePassword,\n      onCancelPassword: () => setShowPassMode(false),\n      avatarPreview: avatarPreview,\n      onAvatarFileChange: handleAvatarChange,\n      avatarFile: avatarFile,\n      reviews: reviews,\n      avgRating: avgRating,\n      reviewCount: reviewCount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 9\n    }, this), activeTab === 'reviews' && /*#__PURE__*/_jsxDEV(ReviewsSection, {\n      reviews: reviews,\n      avgRating: avgRating,\n      reviewCount: reviewCount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 9\n    }, this), showDeleteConfirm && trainingToDelete && /*#__PURE__*/_jsxDEV(Modal, {\n      modalType: \"confirm\",\n      onClose: cancelDelete,\n      message: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u0412\\u0438 \\u0432\\u043F\\u0435\\u0432\\u043D\\u0435\\u043D\\u0456, \\u0449\\u043E \\u0445\\u043E\\u0447\\u0435\\u0442\\u0435 \\u0432\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u0442\\u0440\\u0435\\u043D\\u0443\\u0432\\u0430\\u043D\\u043D\\u044F\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 59\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: trainingToDelete.section\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 17\n          }, this), \" \\u0432\\u0456\\u0434 \", formatDate(trainingToDelete.start_time), \"?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center',\n            gap: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"submit-btn\",\n            onClick: confirmDelete,\n            children: \"\\u0422\\u0430\\u043A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-btn\",\n            onClick: cancelDelete,\n            children: \"\\u041D\\u0456\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 9\n    }, this), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      modalType: \"success\",\n      message: modalMessage,\n      onClose: () => setShowModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 707,\n      columnNumber: 9\n    }, this), showAvatarSuccess && /*#__PURE__*/_jsxDEV(Modal, {\n      modalType: \"success\",\n      message: \"\\u0424\\u043E\\u0442\\u043E \\u0443\\u0441\\u043F\\u0456\\u0448\\u043D\\u043E \\u0437\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043E!\",\n      onClose: () => setShowAvatarSuccess(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 9\n    }, this), passSuccess && /*#__PURE__*/_jsxDEV(Modal, {\n      modalType: \"success\",\n      message: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0443\\u0441\\u043F\\u0456\\u0448\\u043D\\u043E \\u0437\\u043C\\u0456\\u043D\\u0435\\u043D\\u043E!\",\n      onClose: () => setPassSuccess(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 713,\n      columnNumber: 9\n    }, this), showProfileSuccess && /*#__PURE__*/_jsxDEV(Modal, {\n      modalType: \"success\",\n      message: \"\\u041F\\u0440\\u043E\\u0444\\u0456\\u043B\\u044C \\u0443\\u0441\\u043F\\u0456\\u0448\\u043D\\u043E \\u043E\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043E!\",\n      onClose: () => setShowProfileSuccess(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 9\n    }, this), showErrorModal && /*#__PURE__*/_jsxDEV(Modal, {\n      modalType: \"error\",\n      className: \"error-modal\",\n      message: errorModalMessage,\n      onClose: () => setShowErrorModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 722,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 592,\n    columnNumber: 7\n  }, this);\n}\n_s(CoachDashboard, \"zO1G4Zd/4KCXYIc7vfsX2hAZkE8=\", false, function () {\n  return [useHistory];\n});\n_c = CoachDashboard;\nvar _c;\n$RefreshReg$(_c, \"CoachDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useHistory","NavigationPanel","MyTrainingSection","HistorySection","CreateTrainingSection","ProfileSection","ReviewsSection","Modal","createTraining","getCoachTrainings","getTrainingParticipants","updateTraining","deleteTraining","getCoachProfile","getAthleteProfile","updateCoachProfile","changeCoachPassword","uploadCoachAvatar","getCoachReviews","API_BASE_URL","jsxDEV","_jsxDEV","sportLogos","require","sportCategories","defaultAvatar","CoachDashboard","_s","history","handleLogout","localStorage","removeItem","push","activeTab","setActiveTab","showCreateForm","setShowCreateForm","trainingData","setTrainingData","date","start_time","end_time","price","spots","currency","category","section","errors","setErrors","modalMessage","setModalMessage","showModal","setShowModal","trainings","setTrainings","selectedTraining","setSelectedTraining","participants","setParticipants","showParticipantsModal","setShowParticipantsModal","athleteProfile","setAthleteProfile","showAthleteModal","setShowAthleteModal","editMode","setEditMode","editData","setEditData","now","Date","pastTrainings","useMemo","filter","t","sort","a","b","profile","setProfile","editProfileMode","setEditProfileMode","nameInput","setNameInput","ageInput","setAgeInput","phoneInput","setPhoneInput","description","setDescription","favoriteSports","setFavoriteSports","profileError","setProfileError","showProfileSuccess","setShowProfileSuccess","avatarFile","setAvatarFile","avatarPreview","setAvatarPreview","showAvatarSuccess","setShowAvatarSuccess","showPassMode","setShowPassMode","oldPass","setOldPass","newPass","setNewPass","confirmPass","setConfirmPass","passError","setPassError","passSuccess","setPassSuccess","showDeleteConfirm","setShowDeleteConfirm","trainingToDelete","setTrainingToDelete","reviews","setReviews","avgRating","setAvgRating","reviewCount","setReviewCount","reviewSectionRef","errorModalMessage","setErrorModalMessage","showErrorModal","setShowErrorModal","today","toISOString","split","allSections","Object","values","flat","isLoading","setIsLoading","fetchTrainings","fetchProfileAndReviews","coachId","getItem","map","parseInt","err","console","error","name","age","phone","favorite_sports","avatar_url","average_rating","count","withAvatars","Promise","all","r","athlete_id","athlete_avatar_url","athlete","getMinTime","toTimeString","slice","getEditMinTime","todayStr","handleChange","e","target","value","handleCategoryChange","handleSubmit","preventDefault","parseFloat","startDT","payload","coach_id","coach_name","msg","message","toLowerCase","includes","handleViewParticipants","training","freeSeats","fromServer","_id","handleViewAthlete","athleteId","handleDeleteClick","confirmDelete","cancelDelete","handleEdit","_t$participants","signed","length","totalCapacity","toString","handleEditChange","handleEditSubmit","_selectedTraining$par","edit","newStart","isNaN","_err$response","_err$response2","_err$response2$data","_err$response2$data$d","_err$response3","_err$response3$data","status","response","detail","data","fallback","cancelEdit","closeParticipantsModal","closeAthleteModal","handleProfileFieldChange","toggleSport","sport","prev","s","handleSaveProfile","trim","ageNum","user_id","handleAvatarChange","file","files","URL","createObjectURL","handleUploadAvatar","handleChangePassword","old_password","new_password","confirm_password","formatDate","dateString","toLocaleDateString","day","month","year","formatTime","toLocaleTimeString","hour","minute","className","children","onTabChange","onLogout","fileName","_jsxFileName","lineNumber","columnNumber","toggleCreateForm","v","onChangeField","onChangeCategory","onSubmit","errorsEdit","onView","onDelete","onViewAthlete","onToggleEditMode","onToggleSport","onSaveProfile","onCancelEdit","onUploadAvatar","onTogglePasswordMode","onChangePassword","onCancelPassword","onAvatarFileChange","modalType","onClose","style","textAlign","display","justifyContent","gap","onClick","_c","$RefreshReg$"],"sources":["D:/ProjectD/client/src/components/Dashboards/CoachDashboards/CoachDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport NavigationPanel from './NavigationPanel';\r\nimport MyTrainingSection from './MyTrainingSection';\r\nimport HistorySection from './HistorySection';\r\nimport CreateTrainingSection from './CreateTrainingSection';\r\nimport ProfileSection from './ProfileSection';\r\nimport ReviewsSection from './ReviewsSection';\r\nimport Modal from '../../Common/Modal';\r\nimport {\r\n  createTraining,\r\n  getCoachTrainings,\r\n  getTrainingParticipants,\r\n  updateTraining,\r\n  deleteTraining,\r\n  getCoachProfile,\r\n  getAthleteProfile,\r\n  updateCoachProfile,\r\n  changeCoachPassword,\r\n  uploadCoachAvatar,\r\n  getCoachReviews,\r\n  API_BASE_URL\r\n} from '../../../services/api';\r\nimport './CoachDashboards.css';\r\n\r\n// Мапа секція → логотип\r\nconst sportLogos = {\r\n  \"Футбол\":        require('../../../assets/logos/football.jpg'),\r\n  \"Баскетбол\":     require('../../../assets/logos/basketball.jpg'),\r\n  \"Бадмінтон\":     require('../../../assets/logos/badminton.jpg'),\r\n  \"Волейбол\":      require('../../../assets/logos/volleyball.jpg'),\r\n  \"Бейсбол\":       require('../../../assets/logos/baseball.jpg'),\r\n  \"Регбі\":         require('../../../assets/logos/rugby.jpg'),\r\n  \"Хокей\":         require('../../../assets/logos/hockey.jpg'),\r\n  \"Карате\":        require('../../../assets/logos/karate.jpg'),\r\n  \"Бокс\":          require('../../../assets/logos/boxing.jpg'),\r\n  \"Ушу\":           require('../../../assets/logos/wushu.jpg'),\r\n  \"Джиу-джитсу\":   require('../../../assets/logos/jiu_jitsu.jpg'),\r\n  \"ММА\":           require('../../../assets/logos/mma.jpg'),\r\n  \"Біг\":           require('../../../assets/logos/running.jpg'),\r\n  \"Стрибки\":       require('../../../assets/logos/jumping.jpg'),\r\n  \"Метання\":       require('../../../assets/logos/throwing.jpg'),\r\n  \"Плавання\":      require('../../../assets/logos/swimming.jpg'),\r\n  \"Вітрильний спорт\":  require('../../../assets/logos/sailing.jpg'),\r\n  \"Каноїзм\":           require('../../../assets/logos/canoeing.jpg'),\r\n  \"Скейбординг\":       require('../../../assets/logos/skateboarding.jpg'),\r\n  \"Сноубординг\":       require('../../../assets/logos/snowboarding.jpg'),\r\n  \"Альпінізм\":         require('../../../assets/logos/climbing.jpg'),\r\n  \"Фітнес\":            require('../../../assets/logos/fitness.jpg'),\r\n  \"Силові тренування\": require('../../../assets/logos/strength_training.jpg'),\r\n  \"Йога\":              require('../../../assets/logos/yoga.jpg')\r\n};\r\n\r\n// Категорії та секції\r\nconst sportCategories = {\r\n  \"Ігри з м'ячем\":           [\"Футбол\",\"Баскетбол\",\"Бадмінтон\",\"Волейбол\",\"Бейсбол\",\"Регбі\",\"Хокей\"],\r\n  \"Бойові мистецтва\":        [\"Карате\",\"Бокс\",\"Ушу\",\"Джиу-джитсу\",\"ММА\"],\r\n  \"Легка атлетика\":          [\"Біг\",\"Стрибки\",\"Метання\"],\r\n  \"Водні види спорту\":       [\"Плавання\",\"Вітрильний спорт\",\"Каноїзм\"],\r\n  \"Екстремальні види спорту\":[\"Скейбординг\",\"Сноубординг\",\"Альпінізм\"],\r\n  \"Фітнес та тренажерний зал\":[\"Фітнес\",\"Силові тренування\",\"Йога\"]\r\n};\r\n\r\nconst defaultAvatar = `${API_BASE_URL}/avatars/default.png`;\r\n\r\nexport default function CoachDashboard() {\r\n  // Навігація\r\n  const history = useHistory();\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('userId');\r\n    history.push('/');\r\n  };\r\n\r\n  // Вкладки\r\n  const [activeTab, setActiveTab] = useState('my-trainings');\r\n\r\n  // Сайдбар: створення тренувань\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n\r\n  // Закриваємо сайдбар при зміні вкладки\r\n  useEffect(() => {\r\n    setShowCreateForm(false);\r\n  }, [activeTab]);\r\n\r\n  // Дані форми створення\r\n  const [trainingData, setTrainingData] = useState({\r\n    date: '', start_time: '', end_time: '',\r\n    price: '', spots: '', currency: 'UAH',\r\n    category: '', section: ''\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [modalMessage, setModalMessage] = useState('');\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  // Тренування\r\n  const [trainings, setTrainings] = useState([]);\r\n  const [selectedTraining, setSelectedTraining] = useState(null);\r\n  const [participants, setParticipants] = useState([]);\r\n  const [showParticipantsModal, setShowParticipantsModal] = useState(false);\r\n  const [athleteProfile, setAthleteProfile] = useState(null);\r\n  const [showAthleteModal, setShowAthleteModal] = useState(false);\r\n\r\n  // Редагування\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [editData, setEditData] = useState({\r\n    date:'', start_time:'', end_time:'',\r\n    price:'', spots:'', currency:'',\r\n    category:'', section:''\r\n  });\r\n\r\n  //Минулі тренування\r\n   const now = new Date();\r\n  const pastTrainings = React.useMemo(\r\n   () => trainings.filter(t => new Date(t.end_time) < now)\r\n       .sort((a,b)=> new Date(b.start_time)-new Date(a.start_time)),\r\n   [trainings]\r\n  );\r\n\r\n  // Профіль\r\n  const [profile, setProfile] = useState(null);\r\n  const [editProfileMode, setEditProfileMode] = useState(false);\r\n  const [nameInput, setNameInput] = useState('');\r\n  const [ageInput, setAgeInput] = useState('');\r\n  const [phoneInput, setPhoneInput] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [favoriteSports, setFavoriteSports] = useState([]);\r\n  const [profileError, setProfileError] = useState('');\r\n  const [showProfileSuccess, setShowProfileSuccess] = useState(false);\r\n\r\n  // Аватар\r\n  const [avatarFile, setAvatarFile] = useState(null);\r\n  const [avatarPreview, setAvatarPreview] = useState('');\r\n  const [showAvatarSuccess, setShowAvatarSuccess] = useState(false);\r\n\r\n  // Зміна пароля\r\n  const [showPassMode, setShowPassMode] = useState(false);\r\n  const [oldPass, setOldPass] = useState('');\r\n  const [newPass, setNewPass] = useState('');\r\n  const [confirmPass, setConfirmPass] = useState('');\r\n  const [passError, setPassError] = useState('');\r\n  const [passSuccess, setPassSuccess] = useState(false);\r\n\r\n  // Видалення\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [trainingToDelete, setTrainingToDelete] = useState(null);\r\n\r\n  // Відгуки\r\n  const [reviews, setReviews] = useState([]);\r\n  const [avgRating, setAvgRating] = useState(null);\r\n  const [reviewCount, setReviewCount] = useState(0);\r\n  const reviewSectionRef = useRef(null);\r\n\r\n  // повідомлення для помилки форми створення\r\n  const [errorModalMessage, setErrorModalMessage] = useState('');\r\n  const [showErrorModal, setShowErrorModal]     = useState(false);\r\n\r\n\r\n  // Інші константи\r\n  const today = new Date().toISOString().split('T')[0];\r\n  const allSections = Object.values(sportCategories).flat();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Завантаження даних\r\n  useEffect(() => {\r\n    fetchTrainings();\r\n    fetchProfileAndReviews();\r\n  }, []);\r\n\r\n  async function fetchTrainings() {\r\n    setIsLoading(true);    // ← перед стартом завантаження\r\n    const coachId = localStorage.getItem('userId');\r\n    if (!coachId) {\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    try {\r\n      const { trainings } = await getCoachTrainings(coachId);\r\n      setTrainings(trainings.map(t => ({\r\n        ...t,\r\n        spots: typeof t.spots === 'string'\r\n          ? parseInt(t.spots, 10)\r\n          : t.spots\r\n      })));\r\n    } catch (err) {\r\n      console.error('Помилка завантаження тренувань:', err);\r\n    } finally {\r\n      setIsLoading(false);  // ← після завершення (успіх чи помилка)\r\n    }\r\n  }\r\n  async function fetchProfileAndReviews() {\r\n    const coachId = localStorage.getItem('userId');\r\n    if (!coachId) return;\r\n    try {\r\n      // Профіль\r\n      const { profile } = await getCoachProfile(coachId);\r\n      setProfile(profile);\r\n      setNameInput(profile.name);\r\n      setAgeInput(profile.age);\r\n      setPhoneInput(profile.phone || '');\r\n      setDescription(profile.description || '');\r\n      setFavoriteSports(profile.favorite_sports || []);\r\n      setAvatarPreview(\r\n        profile.avatar_url\r\n          ? `${profile.avatar_url}?t=${Date.now()}`\r\n          : defaultAvatar\r\n      );\r\n      // Відгуки\r\n      const { reviews, average_rating, count } = await getCoachReviews(coachId);\r\n      const withAvatars = await Promise.all(\r\n        reviews.map(async r => {\r\n          if (!r.athlete_id) return { ...r, athlete_avatar_url: null };\r\n          try {\r\n            const { profile: athlete } = await getAthleteProfile(r.athlete_id);\r\n            return { ...r, athlete_avatar_url: athlete.avatar_url || null };\r\n          } catch {\r\n            return { ...r, athlete_avatar_url: null };\r\n          }\r\n        })\r\n      );\r\n      setReviews(withAvatars);\r\n      setAvgRating(average_rating);\r\n      setReviewCount(count);\r\n    } catch (err) {\r\n      console.error('Помилка завантаження профілю/відгуків:', err);\r\n    }\r\n  }\r\n\r\n  // Мінімальний час для сьогодні\r\n  function getMinTime() {\r\n    return trainingData.date === today\r\n      ? new Date().toTimeString().slice(0, 5)\r\n      : '00:00';\r\n  }\r\n\r\n  // Мінімальний час для поля “Початок” в режимі редагування\r\n  function getEditMinTime() {\r\n  const todayStr = new Date().toISOString().split('T')[0];\r\n  // якщо обрана дата редагування — сьогодні, мінімум = зараз\r\n  return editData.date === todayStr\r\n    ? new Date().toTimeString().slice(0, 5)\r\n    : '00:00';\r\n}\r\n\r\n\r\n  // Обробники форми створення\r\n  function handleChange(e) {\r\n    setTrainingData({ ...trainingData, [e.target.name]: e.target.value });\r\n  }\r\n  function handleCategoryChange(e) {\r\n    setTrainingData({ ...trainingData, category: e.target.value, section: '' });\r\n  }\r\n  async function handleSubmit(e) {\r\n  e.preventDefault();\r\n  // Приховуємо старі помилки\r\n  setShowErrorModal(false);\r\n  setErrors({});\r\n\r\n  const coachId = localStorage.getItem('userId');\r\n  if (!coachId) {\r\n    setErrorModalMessage('Будь ласка, увійдіть повторно.');\r\n    setShowErrorModal(true);\r\n    return;\r\n  }\r\n\r\n  // Базова валідація\r\n  if (!trainingData.date || !trainingData.start_time || !trainingData.end_time) {\r\n    setErrorModalMessage('Оберіть дату та час.');\r\n    setShowErrorModal(true);\r\n    return;\r\n  }\r\n  if (!trainingData.category || !trainingData.section) {\r\n    setErrorModalMessage('Оберіть категорію та секцію.');\r\n    setShowErrorModal(true);\r\n    return;\r\n  }\r\n  if (trainingData.start_time >= trainingData.end_time) {\r\n    setErrorModalMessage('Час завершення має бути пізніше початку.');\r\n    setShowErrorModal(true);\r\n    return;\r\n  }\r\n  if (parseFloat(trainingData.price) < 0) {\r\n    setErrorModalMessage('Ціна не може бути від’ємною.');\r\n    setShowErrorModal(true);\r\n    return;\r\n  }\r\n\r\n  const startDT = new Date(`${trainingData.date}T${trainingData.start_time}`);\r\n  if (startDT < new Date()) {\r\n    setErrorModalMessage('Не можна створювати тренування у минулому.');\r\n    setShowErrorModal(true);\r\n    return;\r\n  }\r\n\r\n  // Підготовка даних\r\n  const payload = {\r\n    coach_id: coachId,\r\n    coach_name: profile.name,\r\n    start_time: `${trainingData.date}T${trainingData.start_time}`,\r\n    end_time:   `${trainingData.date}T${trainingData.end_time}`,\r\n    price:      parseFloat(trainingData.price),\r\n    spots:      parseInt(trainingData.spots, 10),\r\n    currency:   trainingData.currency,\r\n    category:   trainingData.category,\r\n    section:    trainingData.section,\r\n  };\r\n\r\n  try {\r\n    await createTraining(payload);\r\n\r\n    // Успіх\r\n    setModalMessage('Тренування успішно створено!');\r\n    setShowModal(true);\r\n\r\n    // Скидаємо форму\r\n    setTrainingData({\r\n      date: '', start_time: '', end_time: '',\r\n      price: '', spots: '', currency: 'UAH',\r\n      category: '', section: ''\r\n    });\r\n    fetchTrainings();\r\n    setShowCreateForm(false);\r\n\r\n  } catch (err) {\r\n    // ловимо бекенд-помилки та показуємо у модалці\r\n    let msg = err.message || 'Невідома помилка при створенні тренування.';\r\n    if (msg.toLowerCase().includes('conflict')) {\r\n      msg = 'Дане тренування накладається за часом на вже існуюче – оберіть інший проміжок.';\r\n    }\r\n    setErrorModalMessage(msg);\r\n    setShowErrorModal(true);\r\n  }\r\n}\r\n\r\n  // Перегляд / редагування учасників\r\n  async function handleViewParticipants(training) {\r\n    const freeSeats = typeof training.spots === 'string'\r\n      ? parseInt(training.spots, 10)\r\n      : training.spots;\r\n    setSelectedTraining({ ...training, spots: freeSeats });\r\n    try {\r\n      const { participants: fromServer } = await getTrainingParticipants(training._id);\r\n      setParticipants(fromServer);\r\n      setShowParticipantsModal(true);\r\n      setEditMode(false);\r\n    } catch (err) {\r\n      console.error('Помилка завантаження учасників:', err);\r\n    }\r\n  }\r\n\r\n  async function handleViewAthlete(athleteId) {\r\n  try {\r\n    const { profile } = await getAthleteProfile(athleteId);\r\n    setAthleteProfile(profile);\r\n    setShowAthleteModal(true);\r\n  } catch (err) {\r\n    console.error('Не вдалося завантажити дані спортсмена:', err);\r\n  }\r\n  }\r\n\r\n  function handleDeleteClick(training) {\r\n    setTrainingToDelete(training);\r\n    setShowDeleteConfirm(true);\r\n  }\r\n  async function confirmDelete() {\r\n    try {\r\n      await deleteTraining(trainingToDelete._id);\r\n      setModalMessage('Тренування успішно видалено.');\r\n      setShowModal(true);\r\n      fetchTrainings();\r\n    } catch (err) {\r\n      setModalMessage(`Помилка: ${err.message}`);\r\n      setShowModal(true);\r\n    } finally {\r\n      setShowDeleteConfirm(false);\r\n      setTrainingToDelete(null);\r\n    }\r\n  }\r\n  function cancelDelete() {\r\n    setShowDeleteConfirm(false);\r\n    setTrainingToDelete(null);\r\n  }\r\n  function handleEdit() {\r\n    const t = selectedTraining;\r\n    const signed = t.participants?.length || 0;\r\n    const freeSeats = parseInt(t.spots, 10);\r\n    const totalCapacity = signed + freeSeats;\r\n    setEditData({\r\n      date: new Date(t.start_time).toISOString().split('T')[0],\r\n      start_time: new Date(t.start_time).toTimeString().slice(0,5),\r\n      end_time: new Date(t.end_time).toTimeString().slice(0,5),\r\n      price: t.price,\r\n      currency: t.currency,\r\n      category: t.category,\r\n      section: t.section,\r\n      spots: totalCapacity.toString()\r\n    });\r\n    setEditMode(true);\r\n  }\r\n  function handleEditChange(e) {\r\n    setEditData({ ...editData, [e.target.name]: e.target.value });\r\n  }\r\n  async function handleEditSubmit(e) {\r\n  e.preventDefault();\r\n  setErrors({});\r\n\r\n  // 1. Обчислимо кількість вже підписаних і загальну місткість\r\n  const signed = selectedTraining.participants?.length || 0;\r\n  const totalCapacity = parseInt(editData.spots, 10);\r\n\r\n  // 2. Локальна валідація\r\n  if (!editData.date || !editData.start_time || !editData.end_time) {\r\n    setErrors({ edit: 'Оберіть дату та час.' });\r\n    return;\r\n  }\r\n  if (editData.start_time >= editData.end_time) {\r\n    setErrors({ edit: 'Час завершення має бути пізніше часу початку.' });\r\n    return;\r\n  }\r\n  const newStart = new Date(`${editData.date}T${editData.start_time}`);\r\n  if (newStart < new Date()) {\r\n    setErrors({ edit: 'Не можна створювати тренування у минулому часі.' });\r\n    return;\r\n  }\r\n  if (isNaN(totalCapacity)) {\r\n    setErrors({ edit: 'Кількість місць має бути числом.' });\r\n    return;\r\n  }\r\n  if (totalCapacity < signed) {\r\n    setErrors({ edit: `Загальна кількість (${totalCapacity}) менша за вже записані (${signed}).` });\r\n    return;\r\n  }\r\n\r\n  // 3. Підготуємо payload\r\n  const payload = {\r\n    start_time: `${editData.date}T${editData.start_time}`,\r\n    end_time:   `${editData.date}T${editData.end_time}`,\r\n    price:      parseFloat(editData.price),\r\n    currency:   editData.currency,\r\n    category:   editData.category,\r\n    section:    editData.section,\r\n    spots:      totalCapacity\r\n  };\r\n\r\n  // 4. Відправка на сервер та обробка помилок\r\n  try {\r\n    await updateTraining(selectedTraining._id, payload);\r\n    setModalMessage('Тренування успішно оновлено!');\r\n    setShowModal(true);\r\n    setEditMode(false);\r\n    fetchTrainings();\r\n    setShowParticipantsModal(false);\r\n  } catch (err) {\r\n    console.error('handleEditSubmit error →', err);\r\n    const status = err.response?.status;\r\n    const detail = err.response?.data?.detail?.toLowerCase() || '';\r\n\r\n    // Якщо бекенд повернув 400 із текстом про накладення — покажемо свою фразу\r\n    if (\r\n      status === 400 &&\r\n      detail.includes('накладається за часом')\r\n    ) {\r\n      setErrors({\r\n        edit: 'Дане тренування накладається за часом на вже існуюче – оберіть інший проміжок.'\r\n      });\r\n      return;\r\n    }\r\n\r\n    // В інших випадках — просто виведемо detail або повідомлення помилки\r\n    const fallback = err.response?.data?.detail || err.message || 'Невідома помилка при оновленні';\r\n    setErrors({ edit: fallback });\r\n  }\r\n}\r\n\r\n\r\n\r\n  function cancelEdit() {\r\n    setEditMode(false);\r\n  }\r\n\r\n  function closeParticipantsModal() {\r\n  setShowParticipantsModal(false);\r\n  setSelectedTraining(null);\r\n  setEditMode(false);\r\n  }\r\n\r\n  function closeAthleteModal() {\r\n  setShowAthleteModal(false);\r\n  setAthleteProfile(null);\r\n  }\r\n\r\n  // Профіль: редагування\r\n  function handleProfileFieldChange(e) {\r\n    const { name, value } = e.target;\r\n    if (name === 'nameInput') setNameInput(value);\r\n    if (name === 'ageInput') setAgeInput(value);\r\n    if (name === 'phoneInput') setPhoneInput(value);\r\n    if (name === 'description') setDescription(value);\r\n    if (name === 'oldPass') setOldPass(value);\r\n    if (name === 'newPass') setNewPass(value);\r\n    if (name === 'confirmPass') setConfirmPass(value);\r\n  }\r\n  function toggleSport(sport) {\r\n    setFavoriteSports(prev =>\r\n      prev.includes(sport) ? prev.filter(s => s !== sport) : [...prev, sport]\r\n    );\r\n  }\r\n  async function handleSaveProfile() {\r\n    setProfileError('');\r\n    if (!nameInput.trim()) {\r\n      setProfileError('Поле \"Ім\\'я\" обов\\'язкове');\r\n      return;\r\n    }\r\n    const ageNum = parseInt(ageInput, 10);\r\n    if (isNaN(ageNum)) {\r\n      setProfileError('Поле \"Вік\" обов\\'язкове');\r\n      return;\r\n    }\r\n    if (ageNum < 18) {\r\n      setProfileError('Вік не може бути менше 18 років');\r\n      return;\r\n    }\r\n    try {\r\n      await updateCoachProfile({\r\n        user_id: profile.user_id,\r\n        name: nameInput.trim(),\r\n        age: ageNum,\r\n        phone: phoneInput,\r\n        description,\r\n        favorite_sports: favoriteSports\r\n      });\r\n      setShowProfileSuccess(true);\r\n      setEditProfileMode(false);\r\n      fetchProfileAndReviews();\r\n    } catch (err) {\r\n      setProfileError(err.message);\r\n    }\r\n  }\r\n  function handleAvatarChange(e) {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    setAvatarFile(file);\r\n    setAvatarPreview(URL.createObjectURL(file));\r\n  }\r\n  async function handleUploadAvatar() {\r\n    if (!avatarFile) return;\r\n    try {\r\n      const { avatar_url } = await uploadCoachAvatar(profile.user_id, avatarFile);\r\n      setAvatarPreview(avatar_url);\r\n      fetchProfileAndReviews();\r\n      setAvatarFile(null);\r\n      setShowAvatarSuccess(true);\r\n    } catch (err) {\r\n      console.error('Помилка завантаження аватара:', err);\r\n    }\r\n  }\r\n  async function handleChangePassword() {\r\n    setPassError('');\r\n    try {\r\n      await changeCoachPassword({\r\n        user_id: profile.user_id,\r\n        old_password: oldPass,\r\n        new_password: newPass,\r\n        confirm_password: confirmPass\r\n      });\r\n      setPassSuccess(true);\r\n      setShowPassMode(false);\r\n      setOldPass('');\r\n      setNewPass('');\r\n      setConfirmPass('');\r\n    } catch (err) {\r\n      setPassError(err.message);\r\n    }\r\n  }\r\n\r\n  // Форматування\r\n  function formatDate(dateString) {\r\n    return new Date(dateString).toLocaleDateString('uk-UA', {\r\n      day:   '2-digit',\r\n      month: '2-digit',\r\n      year:  'numeric'\r\n    });\r\n  }\r\n  function formatTime(dateString) {\r\n    return new Date(dateString).toLocaleTimeString([], {\r\n      hour:   '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  }\r\n\r\n  // JSX\r\n  return (\r\n      <div className={`dashboard-container${showCreateForm ? ' shifted' : ''}`}>\r\n\r\n      <NavigationPanel\r\n        activeTab={activeTab}\r\n        onTabChange={setActiveTab}\r\n        onLogout={handleLogout}\r\n      />\r\n\r\n        {activeTab === 'my-trainings' && (\r\n        <MyTrainingSection\r\n          trainings={trainings.filter(t => new Date(t.end_time) > now)}\r\n          isLoading={isLoading}\r\n          showCreateForm={showCreateForm}\r\n          toggleCreateForm={() => setShowCreateForm(v => !v)}\r\n          trainingData={trainingData}\r\n          errors={errors}\r\n          onChangeField={handleChange}\r\n          onChangeCategory={handleCategoryChange}\r\n          onSubmit={handleSubmit}\r\n          sportCategories={sportCategories}\r\n          today={today}\r\n          getMinTime={getMinTime}\r\n          getEditMinTime={getEditMinTime}\r\n          errorsEdit={errors.edit}\r\n          onView={handleViewParticipants}\r\n          onDelete={handleDeleteClick}\r\n          sportLogos={sportLogos}\r\n          selectedTraining={selectedTraining}\r\n          participants={participants}\r\n          showParticipantsModal={showParticipantsModal}\r\n          editMode={editMode}\r\n          editData={editData}\r\n          handleEdit={handleEdit}\r\n          handleEditChange={handleEditChange}\r\n          handleEditSubmit={handleEditSubmit}\r\n          cancelEdit={cancelEdit}\r\n          closeParticipantsModal={closeParticipantsModal}\r\n          onViewAthlete={handleViewAthlete}\r\n          showAthleteModal={showAthleteModal}\r\n          athleteProfile={athleteProfile}\r\n          closeAthleteModal={closeAthleteModal}\r\n        />\r\n      )}\r\n\r\n     {activeTab === 'history' && (\r\n       <HistorySection\r\n         trainings={pastTrainings}\r\n         sportLogos={sportLogos}\r\n       />\r\n     )}\r\n\r\n      {activeTab === 'profile' && profile && (\r\n        <ProfileSection\r\n          profile={profile}\r\n          editMode={editProfileMode}\r\n          nameInput={nameInput}\r\n          ageInput={ageInput}\r\n          phoneInput={phoneInput}\r\n          description={description}\r\n          favoriteSports={favoriteSports}\r\n          allSections={allSections}\r\n          profileError={profileError}\r\n          showPassMode={showPassMode}\r\n          oldPass={oldPass}\r\n          newPass={newPass}\r\n          confirmPass={confirmPass}\r\n          passError={passError}\r\n          onToggleEditMode={() => setEditProfileMode(true)}\r\n          onChangeField={handleProfileFieldChange}\r\n          onToggleSport={toggleSport}\r\n          onSaveProfile={handleSaveProfile}\r\n          onCancelEdit={() => setEditProfileMode(false)}\r\n          onUploadAvatar={handleUploadAvatar}\r\n          onTogglePasswordMode={() => setShowPassMode(true)}\r\n          onChangePassword={handleChangePassword}\r\n          onCancelPassword={() => setShowPassMode(false)}\r\n          avatarPreview={avatarPreview}\r\n          onAvatarFileChange={handleAvatarChange}\r\n          avatarFile={avatarFile}\r\n          reviews={reviews}\r\n          avgRating={avgRating}\r\n          reviewCount={reviewCount}\r\n        />\r\n      )}\r\n\r\n      {activeTab === 'reviews' && (\r\n        <ReviewsSection\r\n          reviews={reviews}\r\n          avgRating={avgRating}\r\n          reviewCount={reviewCount}\r\n        />\r\n      )}\r\n\r\n      {/* Підтвердження видалення */}\r\n      {showDeleteConfirm && trainingToDelete && (\r\n        <Modal\r\n          modalType=\"confirm\"\r\n          onClose={cancelDelete}\r\n          message={\r\n            <div style={{ textAlign: 'center' }}>\r\n              <p>\r\n                Ви впевнені, що хочете видалити тренування<br/>\r\n                <strong>{trainingToDelete.section}</strong> від {formatDate(trainingToDelete.start_time)}?\r\n              </p>\r\n              <div style={{ display: 'flex', justifyContent: 'center', gap: '1rem' }}>\r\n                <button className=\"submit-btn\" onClick={confirmDelete}>Так</button>\r\n                <button className=\"cancel-btn\" onClick={cancelDelete}>Ні</button>\r\n              </div>\r\n            </div>\r\n          }\r\n        />\r\n      )}\r\n\r\n      {/* Модалки успіху */}\r\n      {showModal && (\r\n        <Modal modalType=\"success\" message={modalMessage} onClose={() => setShowModal(false)} />\r\n      )}\r\n      {showAvatarSuccess && (\r\n        <Modal modalType=\"success\" message=\"Фото успішно завантажено!\" onClose={() => setShowAvatarSuccess(false)} />\r\n      )}\r\n      {passSuccess && (\r\n        <Modal modalType=\"success\" message=\"Пароль успішно змінено!\" onClose={() => setPassSuccess(false)} />\r\n      )}\r\n      {showProfileSuccess && (\r\n        <Modal modalType=\"success\" message=\"Профіль успішно оновлено!\" onClose={() => setShowProfileSuccess(false)} />\r\n      )}\r\n\r\n        {/* Модалка помилки */}\r\n\r\n        {showErrorModal && (\r\n        <Modal\r\n          modalType=\"error\"\r\n          className=\"error-modal\"\r\n          message={errorModalMessage}\r\n          onClose={() => setShowErrorModal(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}